<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nurse Path+ Ultimate | 看護師国試対策 完全攻略ダッシュボード v13 (Mobile Fix)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #f8fafc; color: #334155; }
        
        /* Layout Utils */
        /* モバイルではグラフの高さを少し抑え、PCでは標準の高さにする */
        .chart-container { position: relative; width: 100%; max-width: 100%; margin: 0 auto; height: 250px; }
        @media (min-width: 768px) {
            .chart-container { height: 300px; }
        }
        
        /* Navigation & Tabs */
        .nav-btn.active { background-color: #eff6ff; color: #2563eb; border-right: 4px solid #2563eb; font-weight: 700; }
        .active-tab { border-bottom: 3px solid #3b82f6; color: #3b82f6; font-weight: bold; background-color: #eff6ff; }
        .tab-content { display: none; animation: fadeIn 0.3s ease; }
        .tab-content.active { display: block; }
        
        /* Interactive Elements */
        .keyword-hidden {
            background-color: #ef4444; color: #ef4444; border-radius: 4px; padding: 0 4px;
            cursor: pointer; transition: all 0.2s; user-select: none; font-weight: bold; font-size: 0.9em;
            display: inline-block; /* 改行崩れ防止 */
        }
        .keyword-hidden:hover { opacity: 0.8; }
        .keyword-revealed { background-color: #fee2e2; color: #b91c1c; text-decoration: none; }
        
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        
        /* Mobile specific adjustments */
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body class="flex h-[100dvh] overflow-hidden">

    <!-- Sidebar Navigation (Desktop) -->
    <aside class="w-64 bg-white border-r border-gray-200 hidden md:flex flex-col z-10 flex-shrink-0 shadow-sm">
        <div class="p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white">
            <h1 class="text-xl font-bold text-blue-800 tracking-tight">Nurse Path<span class="text-red-500">+</span></h1>
            <p class="text-[10px] text-gray-500 mt-1 font-bold uppercase tracking-widest">Ultimate Edition v13</p>
        </div>
        <nav class="flex-1 overflow-y-auto p-3 space-y-1">
            <button onclick="showSection('home', this)" class="nav-btn active w-full text-left px-4 py-3 rounded hover:bg-gray-50 transition text-sm font-medium text-gray-700 mb-2">🏠 ホーム・直前チェック</button>
            
            <div class="px-3 pt-3 pb-1 text-xs font-bold text-gray-400 uppercase tracking-wider">重点学習</div>
            <button onclick="showSection('keywords', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-red-50 hover:text-red-600 transition text-sm font-bold text-red-600">★ 頻出キーワード暗記</button>
            <button onclick="showSection('calc', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-yellow-50 hover:text-yellow-700 transition text-sm font-bold text-yellow-700">🔢 計算マスター</button>
            <button onclick="showSection('stats', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-purple-50 hover:text-purple-700 transition text-sm font-bold text-purple-700">📊 統計・人口動態</button>
            
            <div class="px-3 pt-3 pb-1 text-xs font-bold text-gray-400 uppercase tracking-wider">分野別モジュール</div>
            <button onclick="showSection('health', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-blue-50 transition text-sm font-medium text-gray-700">1. 健康定義・予防・倫理</button>
            <button onclick="showSection('social', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-blue-50 transition text-sm font-medium text-gray-700">2. 社会保障・生活保護</button>
            <button onclick="showSection('insurance', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-blue-50 transition text-sm font-medium text-gray-700">3. 医療・介護保険</button>
            <button onclick="showSection('law', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-blue-50 transition text-sm font-medium text-gray-700">4. 法規 (看護・労働・医療)</button>
            <button onclick="showSection('record', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-blue-50 transition text-sm font-medium text-gray-700">5. 記録の保存期間</button>
            <button onclick="showSection('maternal', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-blue-50 transition text-sm font-medium text-gray-700">6. 母子・精神・障害</button>
            <button onclick="showSection('public', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-blue-50 transition text-sm font-medium text-gray-700">7. 公衆衛生・災害・環境</button>
            <button onclick="showSection('history', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-purple-50 transition text-sm font-medium text-gray-700">8. 歴史・理論</button>
            <button onclick="showSection('drugs', this)" class="nav-btn w-full text-left px-4 py-2 rounded hover:bg-blue-50 transition text-sm font-medium text-gray-700">9. 薬物管理</button>
        </nav>
    </aside>

    <!-- Mobile Header -->
    <div class="md:hidden fixed top-0 w-full bg-white border-b border-gray-200 z-20 px-4 py-3 flex justify-between items-center shadow-sm h-14">
        <h1 class="font-bold text-blue-800 text-lg">Nurse Path<span class="text-red-500">+</span></h1>
        <button id="mobile-menu-btn" class="text-gray-500 focus:outline-none p-2 rounded hover:bg-gray-100"><span class="text-2xl">☰</span></button>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-30 hidden transition-opacity">
        <div class="bg-white w-72 h-full p-4 flex flex-col shadow-xl absolute right-0">
            <div class="flex justify-between items-center mb-6 border-b pb-4">
                <h2 class="font-bold text-lg text-gray-800">メニュー</h2>
                <button id="close-menu-btn" class="text-gray-500 text-2xl px-2">×</button>
            </div>
            <nav class="space-y-1 overflow-y-auto h-full pb-20 safe-bottom">
                <button onclick="showSection('home', null); toggleMobileMenu()" class="block w-full text-left px-4 py-3 hover:bg-blue-50 text-blue-700 font-bold rounded">🏠 ホーム</button>
                <button onclick="showSection('keywords', null); toggleMobileMenu()" class="block w-full text-left px-4 py-3 hover:bg-red-50 text-red-600 font-bold rounded border border-red-100 mb-2">★ キーワード暗記</button>
                <button onclick="showSection('stats', null); toggleMobileMenu()" class="block w-full text-left px-4 py-3 hover:bg-purple-50 text-purple-700 font-bold rounded">📊 統計・人口動態</button>
                <button onclick="showSection('calc', null); toggleMobileMenu()" class="block w-full text-left px-4 py-3 hover:bg-yellow-50 text-yellow-700 font-bold rounded">🔢 計算マスター</button>
                
                <p class="px-4 text-xs font-bold text-gray-400 mt-4 mb-2">学習コンテンツ</p>
                <button onclick="showSection('health', null); toggleMobileMenu()" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded text-sm">1. 健康定義・予防</button>
                <button onclick="showSection('social', null); toggleMobileMenu()" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded text-sm">2. 社会保障・生活保護</button>
                <button onclick="showSection('insurance', null); toggleMobileMenu()" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded text-sm">3. 医療・介護保険</button>
                <button onclick="showSection('law', null); toggleMobileMenu()" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded text-sm">4. 法規 (看護・労働)</button>
                <button onclick="showSection('record', null); toggleMobileMenu()" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded text-sm">5. 記録の保存期間</button>
                <button onclick="showSection('maternal', null); toggleMobileMenu()" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded text-sm">6. 母子・精神・障害</button>
                <button onclick="showSection('public', null); toggleMobileMenu()" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded text-sm">7. 公衆衛生・災害</button>
                <button onclick="showSection('history', null); toggleMobileMenu()" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded text-sm">8. 歴史・理論</button>
                <button onclick="showSection('drugs', null); toggleMobileMenu()" class="block w-full text-left px-4 py-2 hover:bg-gray-100 rounded text-sm">9. 薬物管理</button>
            </nav>
        </div>
    </div>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-4 md:p-8 pt-16 md:pt-8 scroll-smooth bg-gray-50 pb-24 safe-bottom" id="main-content">
        
        <!-- SECTION: HOME -->
        <section id="home" class="content-section max-w-6xl mx-auto">
            <header class="mb-8 bg-white p-6 rounded-xl shadow-sm border border-gray-200 mt-2">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Nurse Path<span class="text-red-500">+</span> 直前対策サマリー</h2>
                <p class="text-gray-600 text-sm">法規・社会保障・統計・計算・理論まで全範囲を網羅した最終版。</p>
            </header>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-sm border border-red-100 p-6 relative overflow-hidden">
                    <h3 class="text-lg font-bold text-red-600 mb-4 flex items-center relative z-10"><span class="mr-2">🔥</span> 直前チェック！重要数字</h3>
                    <div class="space-y-2" id="checklist-container"></div>
                </div>
                <div class="grid grid-cols-1 gap-4">
                    <div onclick="showSection('health', null)" class="bg-gradient-to-r from-blue-50 to-white p-6 rounded-xl border border-blue-200 cursor-pointer hover:shadow-md transition group">
                        <div class="flex items-center justify-between"><div><h4 class="font-bold text-blue-800 mb-1 group-hover:text-blue-600 transition">健康定義・予防</h4><p class="text-xs text-blue-700">WHO、予防の3段階。</p></div><span class="text-3xl">🏥</span></div>
                    </div>
                    <div onclick="showSection('stats', null)" class="bg-gradient-to-r from-purple-50 to-white p-6 rounded-xl border border-purple-200 cursor-pointer hover:shadow-md transition group">
                        <div class="flex items-center justify-between"><div><h4 class="font-bold text-purple-800 mb-1 group-hover:text-purple-600 transition">統計・人口動態</h4><p class="text-xs text-purple-700">合計特殊出生率、死亡率。</p></div><span class="text-3xl">📊</span></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: HEALTH -->
        <section id="health" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-blue-500 pl-3">1. 健康定義・予防・倫理</h2>
            
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-6">
                <h3 class="font-bold text-gray-700 mb-2 border-b pb-2">概要</h3>
                <p class="text-sm text-gray-600">WHO憲章、予防の3段階、主要な倫理宣言。</p>
            </div>

            <!-- WHO Definition Card -->
            <div class="bg-white rounded-lg shadow-sm p-6 mb-6 border-l-4 border-yellow-400">
                <h3 class="font-bold text-lg mb-2">WHO憲章「健康」の定義</h3>
                <p class="text-lg font-medium text-gray-800 italic leading-relaxed">
                    「健康とは、単に病気あるいは虚弱でないことではなく、<span class="text-red-500 font-bold">肉体的</span>、<span class="text-red-500 font-bold">精神的</span>、<span class="text-red-500 font-bold">社会的</span>に完全に良好な状態（Well-being）である」
                </p>
                <p class="text-sm text-gray-500 mt-2">※「経済的」「宗教的」は含まれません。</p>
            </div>

            <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8 overflow-hidden">
                <div class="flex border-b border-gray-200 bg-gray-50 overflow-x-auto whitespace-nowrap">
                    <button class="flex-1 min-w-[120px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600 active-tab" onclick="switchTab(this, 'prev_lv')">予防の3段階</button>
                    <button class="flex-1 min-w-[120px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600" onclick="switchTab(this, 'ethics')">倫理宣言</button>
                </div>
                <div class="p-6">
                    <div id="prev_lv" class="tab-content active">
                        <div class="space-y-4">
                            <div class="p-3 bg-blue-50 rounded border border-blue-100">
                                <h4 class="font-bold text-blue-800">一次予防 (発生予防)</h4>
                                <p class="text-sm">健康増進、予防接種、事故防止、性教育。</p>
                            </div>
                            <div class="p-3 bg-indigo-50 rounded border border-indigo-100">
                                <h4 class="font-bold text-indigo-800">二次予防 (早期発見・早期治療)</h4>
                                <p class="text-sm">健康診断、がん検診、スクリーニング検査。</p>
                            </div>
                            <div class="p-3 bg-purple-50 rounded border border-purple-100">
                                <h4 class="font-bold text-purple-800">三次予防 (再発防止・社会復帰)</h4>
                                <p class="text-sm">リハビリテーション、理学療法、作業療法。</p>
                            </div>
                        </div>
                    </div>
                    <div id="ethics" class="tab-content">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="border p-3 rounded"><strong class="block text-gray-800">リスボン宣言</strong><span class="text-xs text-gray-600">患者の権利。</span></div>
                            <div class="border p-3 rounded"><strong class="block text-gray-800">ヘルシンキ宣言</strong><span class="text-xs text-gray-600">医学研究の倫理。インフォームドコンセント。</span></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="quiz-container-health" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </section>

        <!-- SECTION: STATS -->
        <section id="stats" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-purple-500 pl-3">5. 統計・人口動態</h2>
            
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-6">
                <h3 class="font-bold text-gray-700 mb-2 border-b pb-2">概要</h3>
                <p class="text-sm text-gray-600">合計特殊出生率の低下、悪性新生物・老衰による死亡率の変化、有訴者率（自覚症状）の順位。</p>
            </div>

            <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8 overflow-hidden">
                <div class="flex border-b border-gray-200 bg-gray-50 overflow-x-auto whitespace-nowrap">
                    <button class="flex-1 min-w-[120px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600 active-tab" onclick="switchTab(this, 'stat_death')">死因・死亡率</button>
                    <button class="flex-1 min-w-[120px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600" onclick="switchTab(this, 'stat_birth')">出生率・人口</button>
                    <button class="flex-1 min-w-[120px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600" onclick="switchTab(this, 'stat_life')">有訴者・世帯</button>
                </div>
                <div class="p-6">
                    <!-- Tab 1: Death -->
                    <div id="stat_death" class="tab-content active">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="min-h-[250px]">
                                <h4 class="font-bold text-center mb-2">死因順位 (構成割合)</h4>
                                <div class="chart-container"><canvas id="deathCausesChart"></canvas></div>
                                <p class="text-xs text-center mt-2">1位:悪性新生物 2位:心疾患 3位:老衰</p>
                            </div>
                            <div class="min-h-[250px]">
                                <h4 class="font-bold text-center mb-2">主要死因別死亡率の推移</h4>
                                <div class="chart-container"><canvas id="deathRateChart"></canvas></div>
                                <p class="text-xs text-center mt-2">老衰(緑)が急増中。</p>
                            </div>
                        </div>
                    </div>
                    <!-- Tab 2: Birth -->
                    <div id="stat_birth" class="tab-content">
                        <h4 class="font-bold text-center mb-2">合計特殊出生率の推移</h4>
                        <div class="chart-container"><canvas id="birthRateChart"></canvas></div>
                        <p class="text-xs text-center mt-2 text-red-600 font-bold">1.26 (2022) → 1.20 (2023) 過去最低</p>
                    </div>
                    <!-- Tab 3: Lifestyle -->
                    <div id="stat_life" class="tab-content">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                            <div>
                                <h4 class="font-bold text-center mb-2">有訴者率 (自覚症状)</h4>
                                <div class="chart-container"><canvas id="symptomChart"></canvas></div>
                                <p class="text-xs text-center mt-2">男性1位:腰痛、女性1位:肩こり</p>
                            </div>
                            <div>
                                <h4 class="font-bold text-center mb-2">通院者率</h4>
                                <div class="chart-container"><canvas id="outpatientChart"></canvas></div>
                                <p class="text-xs text-center mt-2">男女とも<span class="text-red-600 font-bold">高血圧症</span>が1位</p>
                            </div>
                        </div>
                        <div class="border-t pt-6">
                            <h4 class="font-bold text-center mb-2">世帯構造 (国民生活基礎調査)</h4>
                            <div class="chart-container" style="max-width: 500px;"><canvas id="householdChart"></canvas></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="quiz-container-stats" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </section>

        <!-- SECTION: CALCULATION -->
        <section id="calc" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-yellow-500 pl-4">🔢 計算問題マスター</h2>
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-8">
                <div class="flex border-b border-gray-200 bg-gray-50 overflow-x-auto whitespace-nowrap">
                    <button class="flex-1 min-w-[100px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600 active-tab" onclick="switchTab(this, 'calc_drip')">点滴・輸液</button>
                    <button class="flex-1 min-w-[100px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600" onclick="switchTab(this, 'calc_oxy')">酸素・薬液</button>
                    <button class="flex-1 min-w-[100px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600" onclick="switchTab(this, 'calc_nut')">栄養・発育</button>
                </div>
                <div class="p-6 min-h-[300px]">
                    <div id="calc_drip" class="tab-content active space-y-6">
                        <div class="bg-blue-50 p-4 rounded border border-blue-200">
                            <h4 class="font-bold text-blue-800 mb-2">点滴の滴下数公式</h4>
                            <p class="text-lg font-bold text-gray-800 mb-2">1分間の滴下数 = (輸液総量 × 係数) ÷ 時間(分)</p>
                            <ul class="list-disc list-inside text-sm text-gray-600">
                                <li>成人用ルート係数：<span class="font-bold text-red-500">20</span> 滴/mL</li>
                                <li>小児用ルート係数：<span class="font-bold text-red-500">60</span> 滴/mL</li>
                            </ul>
                        </div>
                        <div id="quiz-container-calc-drip"></div>
                    </div>
                    <div id="calc_oxy" class="tab-content space-y-6">
                        <div class="bg-green-50 p-4 rounded border border-green-200">
                            <h4 class="font-bold text-green-800 mb-2">酸素ボンベ使用可能時間</h4>
                            <p class="text-lg font-bold text-gray-800 mb-2">時間(分) = (充填圧MPa × 容積L × 10) ÷ 流量(L/分)</p>
                            <p class="text-xs text-gray-500">※圧力計の数値(MPa)を10倍すると大気圧での残量(L)になる。</p>
                        </div>
                        <div id="quiz-container-calc-oxy"></div>
                    </div>
                    <div id="calc_nut" class="tab-content space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-orange-50 p-4 rounded border border-orange-200"><h4 class="font-bold text-orange-800 mb-2">BMI</h4><p class="text-md font-bold mb-1">体重(kg) ÷ 身長(m)²</p><p class="text-xs">標準22 / 肥満25以上</p></div>
                            <div class="bg-pink-50 p-4 rounded border border-pink-200"><h4 class="font-bold text-pink-800 mb-2">小児指数</h4><p class="text-xs">カウプ指数：乳幼児 (15~18)</p><p class="text-xs">ローレル指数：学童</p></div>
                        </div>
                        <div id="quiz-container-calc-nut"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION: SOCIAL SECURITY -->
        <section id="social" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-green-500 pl-3">2. 社会保障・生活保護</h2>
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-8">
                 <div class="flex border-b border-gray-200 bg-gray-50 overflow-x-auto whitespace-nowrap">
                    <button class="flex-1 min-w-[100px] py-3 text-xs md:text-sm font-medium hover:text-blue-600 focus:outline-none active-tab" onclick="switchTab(this, 'soc_base')">4本柱</button>
                    <button class="flex-1 min-w-[100px] py-3 text-xs md:text-sm font-medium hover:text-blue-600 focus:outline-none" onclick="switchTab(this, 'soc_lp')">生活保護法</button>
                    <button class="flex-1 min-w-[100px] py-3 text-xs md:text-sm font-medium hover:text-blue-600 focus:outline-none" onclick="switchTab(this, 'soc_pen')">年金・児童</button>
                </div>
                <div class="p-6 min-h-[300px]">
                    <div id="soc_base" class="tab-content active">
                        <div class="grid grid-cols-2 gap-4 text-center">
                            <div class="bg-blue-50 p-4 rounded"><h4 class="font-bold text-blue-800">社会保険</h4><p class="text-xs">医療・年金・介護・雇用・労災</p></div>
                            <div class="bg-red-50 p-4 rounded"><h4 class="font-bold text-red-800">公的扶助</h4><p class="text-xs">生活保護（全額税金）</p></div>
                            <div class="bg-yellow-50 p-4 rounded"><h4 class="font-bold text-yellow-800">社会福祉</h4><p class="text-xs">高齢者・児童・障害者福祉</p></div>
                            <div class="bg-green-50 p-4 rounded"><h4 class="font-bold text-green-800">公衆衛生</h4><p class="text-xs">感染症対策・環境衛生</p></div>
                        </div>
                    </div>
                    <div id="soc_lp" class="tab-content">
                        <div class="mb-6 border rounded bg-gray-50 overflow-hidden">
                            <div class="p-3 bg-gray-100 font-bold text-gray-700 cursor-pointer flex justify-between" onclick="toggleAccordion('lp_principles')"><span>4原理・4原則の詳細</span><span>▼</span></div>
                            <div id="lp_principles" class="accordion-content p-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div><h5 class="font-bold border-b mb-2">4つの原理</h5><ul class="text-sm list-disc list-inside"><li>国家責任</li><li>無差別平等</li><li>最低生活保障</li><li>補足性</li></ul></div>
                                    <div><h5 class="font-bold border-b mb-2">4つの原則</h5><ul class="text-sm list-disc list-inside"><li>申請保護</li><li>基準及び程度</li><li>必要即応</li><li>世帯単位</li></ul></div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-red-50 p-4 rounded border border-red-200 text-center">
                            <h4 class="font-bold text-red-800 mb-2">8つの扶助</h4>
                            <div class="mb-2"><span class="bg-red-600 text-white text-xs px-3 py-1 rounded-full">現物</span> 医療・介護</div>
                            <div><span class="bg-gray-600 text-white text-xs px-3 py-1 rounded-full">現金</span> 生活・住宅・教育・出産・生業・葬祭</div>
                        </div>
                    </div>
                    <div id="soc_pen" class="tab-content">
                        <div class="space-y-4">
                            <div class="border p-4 rounded bg-orange-50"><h4 class="font-bold text-orange-800">公的年金</h4><ul class="list-disc list-inside text-sm"><li>国民年金：20-60歳全員。</li><li>厚生年金：会社員。</li></ul></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="quiz-container-social" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </section>

        <!-- SECTION: INSURANCE -->
        <section id="insurance" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-teal-500 pl-3">3. 医療・介護保険</h2>
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8 overflow-hidden">
                <div class="flex border-b border-gray-200 bg-gray-50 overflow-x-auto whitespace-nowrap">
                    <button class="flex-1 min-w-[100px] py-3 text-xs md:text-sm font-medium hover:text-blue-600 focus:outline-none active-tab" onclick="switchTab(this, 'ins_med')">医療保険</button>
                    <button class="flex-1 min-w-[100px] py-3 text-xs md:text-sm font-medium hover:text-blue-600 focus:outline-none" onclick="switchTab(this, 'ins_care')">介護サービス</button>
                </div>
                <div class="p-6 min-h-[300px]">
                    <div id="ins_med" class="tab-content active space-y-4">
                        <div class="bg-blue-50 p-3 rounded text-sm"><strong>被用者保険</strong>：健保（組合・協会）、共済。</div>
                        <div class="bg-green-50 p-3 rounded text-sm"><strong>国保</strong>：自営業。保険者は市町村。</div>
                        <div class="bg-purple-50 p-3 rounded text-sm"><strong>後期高齢者</strong>：75歳以上。広域連合。</div>
                    </div>
                    <div id="ins_care" class="tab-content">
                        <div class="space-y-3">
                            <div class="bg-blue-50 p-3 rounded text-sm"><strong>(1) 居宅</strong>：訪問看護、デイ、ショート、<span class="text-red-600 font-bold">特定福祉用具販売</span>。</div>
                            <div class="bg-green-50 p-3 rounded text-sm"><strong>(2) 施設</strong>：特養(生活)、老健(復帰)、医療院(長期)。</div>
                            <div class="bg-orange-50 p-3 rounded text-sm"><strong>(3) 地域密着</strong>：グループホーム(認知症)。</div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="quiz-container-insurance" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </section>

        <!-- SECTION: LAW -->
        <section id="law" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-indigo-500 pl-3">4. 法規 (看護・労働・医療)</h2>
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8 overflow-hidden">
                <div class="flex border-b border-gray-200 bg-gray-50 overflow-x-auto whitespace-nowrap">
                    <button class="flex-1 min-w-[100px] py-3 text-xs md:text-sm font-medium hover:text-blue-600 focus:outline-none active-tab" onclick="switchTab(this, 'law_nurse')">看護・労働</button>
                    <button class="flex-1 min-w-[100px] py-3 text-xs md:text-sm font-medium hover:text-blue-600 focus:outline-none" onclick="switchTab(this, 'law_med')">医療法・薬機法</button>
                </div>
                <div class="p-6 min-h-[300px]">
                    <div id="law_nurse" class="tab-content active">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="border p-4 rounded bg-indigo-50"><h4 class="font-bold text-indigo-800">保助看法</h4><ul class="list-disc list-inside text-sm mt-2"><li>義務：守秘義務、名称独占。</li><li>届出：2年ごと知事へ。</li></ul></div>
                            <div class="border p-4 rounded bg-pink-50 col-span-1 md:col-span-2"><h4 class="font-bold text-pink-800">労働基準法</h4><ul class="list-disc list-inside text-sm mt-2"><li>産前産後休業。妊産婦保護。</li></ul></div>
                        </div>
                    </div>
                    <div id="law_med" class="tab-content">
                        <div class="border p-4 rounded bg-teal-50"><h4 class="font-bold text-teal-800">医療法</h4><ul class="list-disc list-inside text-sm mt-2"><li>病院(20床以上)、診療所(19床以下)。</li><li>医療計画(都道府県)。</li></ul></div>
                    </div>
                </div>
            </div>
            <div id="quiz-container-law" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </section>

        <!-- SECTION: RECORD -->
        <section id="record" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-green-600 pl-3">5. 記録の保存期間</h2>
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8 overflow-x-auto">
                <table class="w-full text-sm text-left min-w-[300px]">
                    <thead class="bg-green-50 text-green-900"><tr><th class="px-4 py-3 font-bold">書類名</th><th class="px-4 py-3 font-bold">期間</th><th class="px-4 py-3 font-bold">根拠法</th></tr></thead>
                    <tbody class="divide-y divide-gray-100">
                        <tr class="hover:bg-gray-50"><td class="px-4 py-3 font-bold">診療録 (カルテ)</td><td class="px-4 py-3 text-red-600 font-bold text-lg">5年</td><td class="px-4 py-3">医師法</td></tr>
                        <tr class="hover:bg-gray-50"><td class="px-4 py-3 font-bold">助産録</td><td class="px-4 py-3 text-red-600 font-bold text-lg">5年</td><td class="px-4 py-3">保助看法</td></tr>
                        <tr class="bg-gray-50"><td class="px-4 py-3 font-bold">手術・看護・検査</td><td class="px-4 py-3 text-blue-600 font-bold text-lg">2年</td><td class="px-4 py-3">医療法</td></tr>
                        <tr class="hover:bg-gray-50"><td class="px-4 py-3 font-bold">処方箋・調剤録</td><td class="px-4 py-3 font-bold">3年</td><td class="px-4 py-3">薬剤師法</td></tr>
                    </tbody>
                </table>
            </div>
            <div id="quiz-container-record" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </section>

        <!-- SECTION: MATERNAL -->
        <section id="maternal" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-pink-500 pl-3">6. 母子・精神・障害</h2>
            <div class="bg-white rounded-lg shadow-sm p-6 mb-8">
                <h3 class="font-bold text-lg mb-4">母子関連3法 & 精神入院</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="space-y-3">
                        <div class="p-3 border-l-4 border-pink-400 bg-white shadow-sm rounded"><strong>母子保健法</strong>：母子手帳、健診、養育医療。</div>
                        <div class="p-3 border-l-4 border-blue-400 bg-white shadow-sm rounded"><strong>児童福祉法</strong>：保育所、児相、小児慢性特定疾病。</div>
                        <div class="p-3 border-l-4 border-purple-400 bg-white shadow-sm rounded"><strong>母体保護法</strong>：不妊・中絶。</div>
                    </div>
                    <div class="p-4 border rounded bg-gray-50">
                        <h4 class="font-bold mb-2">精神入院形態</h4>
                        <ul class="text-sm space-y-1">
                            <li><strong>任意</strong>：本人の同意。</li>
                            <li><strong>医療保護</strong>：家族等同意＋指定医1名。</li>
                            <li><strong>措置</strong>：自傷他害＋指定医2名＋知事。</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="quiz-container-maternal" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </section>

        <!-- SECTION: PUBLIC -->
        <section id="public" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-yellow-500 pl-3">7. 公衆衛生・災害・環境</h2>
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-8 overflow-hidden">
                <div class="flex border-b border-gray-200 bg-gray-50 overflow-x-auto whitespace-nowrap">
                    <button class="flex-1 min-w-[100px] py-3 text-xs md:text-sm font-medium hover:text-blue-600 focus:outline-none active-tab" onclick="switchTab(this, 'pub_inf')">感染症・環境</button>
                    <button class="flex-1 min-w-[100px] py-3 text-xs md:text-sm font-medium hover:text-blue-600 focus:outline-none" onclick="switchTab(this, 'pub_disaster')">災害・国際</button>
                </div>
                <div class="p-6 min-h-[300px]">
                    <div id="pub_inf" class="tab-content active">
                        <table class="w-full text-sm text-left mb-4"><thead class="bg-gray-100"><tr><th class="px-4 py-2">類</th><th class="px-4 py-2">代表</th><th class="px-4 py-2">対応</th></tr></thead><tbody><tr><td class="px-4 py-2 font-bold">1類</td><td>エボラ</td><td class="text-red-600">入院</td></tr><tr><td class="px-4 py-2 font-bold">2類</td><td>結核</td><td class="text-orange-600">勧告</td></tr><tr><td class="px-4 py-2 font-bold">3類</td><td>O-157</td><td>就業制限</td></tr></tbody></table>
                        <div class="border p-3 rounded bg-red-50 text-sm"><strong>感染性廃棄物</strong>：赤(液)、橙(固)、黄(鋭利)。</div>
                    </div>
                    <div id="pub_disaster" class="tab-content space-y-4">
                        <div class="bg-gray-50 p-4 rounded border border-gray-200">
                            <h4 class="font-bold text-gray-800 mb-2">トリアージタッグ (START法)</h4>
                            <div class="grid grid-cols-2 gap-2 text-sm text-center">
                                <div class="bg-black text-white p-2 rounded">黒 (0) 死亡群</div>
                                <div class="bg-red-600 text-white p-2 rounded">赤 (I) 最優先</div>
                                <div class="bg-yellow-400 text-black p-2 rounded">黄 (II) 待機</div>
                                <div class="bg-green-500 text-white p-2 rounded">緑 (III) 保留</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="quiz-container-public" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </section>

        <!-- SECTION: HISTORY -->
        <section id="history" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-purple-500 pl-4">8. 歴史・理論</h2>
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8">
                <div class="space-y-4">
                    <div class="border-l-4 border-purple-400 pl-4 py-1"><h4 class="font-bold text-lg">ナイチンゲール</h4><p class="text-sm text-gray-600">『看護覚え書』環境説。</p></div>
                    <div class="border-l-4 border-blue-400 pl-4 py-1"><h4 class="font-bold text-lg">ヘンダーソン</h4><p class="text-sm text-gray-600">14の基本的ニード。自立支援。</p></div>
                </div>
            </div>
            <div id="quiz-container-theory" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </section>

        <!-- SECTION: DRUGS -->
        <section id="drugs" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-gray-600 pl-3">9. 薬物管理</h2>
            <div class="bg-white rounded-lg shadow-sm p-6 mb-8 border-t-4 border-gray-800">
                <h3 class="font-bold text-lg mb-2">麻薬管理 (麻薬及び向精神薬取締法)</h3>
                <ul class="list-disc list-inside text-sm space-y-2 mb-4">
                    <li>保管：鍵のかかる<span class="font-bold text-red-600">堅固な設備</span>。</li>
                    <li>事故時：<span class="font-bold">都道府県知事</span>へ届出。</li>
                </ul>
                <h3 class="font-bold text-lg mb-2 mt-6">毒薬・劇薬の表示</h3>
                <div class="flex gap-4">
                    <div class="bg-black text-white px-3 py-1 text-xs font-bold rounded">毒薬 (黒地白字)</div>
                    <div class="bg-white text-red-600 border border-red-600 px-3 py-1 text-xs font-bold rounded">劇薬 (白地赤字)</div>
                </div>
            </div>
            <div id="quiz-container-drugs" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </section>

        <!-- SECTION: KEYWORDS -->
        <section id="keywords" class="content-section hidden max-w-6xl mx-auto">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 border-l-4 border-red-500 pl-4">★ 頻出キーワード暗記マスター</h2>
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                <div class="bg-red-50 p-3 text-center border-b border-red-100"><p class="text-sm text-red-700 font-bold">🟥 赤いボックスをタップして答えを表示</p></div>
                <div class="flex border-b border-gray-200 bg-gray-50 overflow-x-auto whitespace-nowrap">
                    <button class="flex-1 min-w-[100px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600 active-tab" onclick="switchTab(this, 'kw_law')">法規・倫理</button>
                    <button class="flex-1 min-w-[100px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600" onclick="switchTab(this, 'kw_rec')">保存期間</button>
                    <button class="flex-1 min-w-[100px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600" onclick="switchTab(this, 'kw_social')">社会保障</button>
                    <button class="flex-1 min-w-[100px] py-3 text-sm font-bold text-gray-500 hover:text-blue-600" onclick="switchTab(this, 'kw_stats')">統計・定義</button>
                </div>
                <div class="p-6 min-h-[400px]">
                    <div id="kw_law" class="tab-content active space-y-6">
                        <div class="pb-3 border-b border-gray-100">
                            <p class="text-xs text-gray-400 font-bold mb-1">看護師の義務 (保助看法)</p>
                            <p class="text-base leading-relaxed">正当な理由なく秘密を漏らしてはならない義務を<span class="keyword-hidden" onclick="toggleKeyword(this)">守秘義務</span>という。</p>
                        </div>
                    </div>
                    <div id="kw_rec" class="tab-content space-y-6"><div class="pb-3 border-b border-gray-100"><p class="text-base leading-relaxed">診療録は<span class="keyword-hidden" onclick="toggleKeyword(this)">5年</span>、看護記録は<span class="keyword-hidden" onclick="toggleKeyword(this)">2年</span>。</p></div></div>
                    <div id="kw_social" class="tab-content space-y-6"><div class="pb-3 border-b border-gray-100"><p class="text-base leading-relaxed">生活保護は<span class="keyword-hidden" onclick="toggleKeyword(this)">世帯</span>単位。</p></div></div>
                    <div id="kw_stats" class="tab-content space-y-6"><div class="pb-3 border-b border-gray-100"><p class="text-base leading-relaxed">WHO定義：<span class="keyword-hidden" onclick="toggleKeyword(this)">肉体的</span>、<span class="keyword-hidden" onclick="toggleKeyword(this)">精神的</span>、<span class="keyword-hidden" onclick="toggleKeyword(this)">社会的</span>。</p></div></div>
                </div>
            </div>
        </section>

    </main>

    <!-- Template -->
    <template id="quiz-template">
        <div class="bg-white rounded-lg border border-gray-200 p-6 shadow-sm h-full flex flex-col justify-between hover:shadow-md transition">
            <div>
                <div class="flex items-start mb-4">
                    <span class="bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded mr-2 mt-1 flex-shrink-0">問</span>
                    <p class="font-bold text-gray-800 quiz-question"></p>
                </div>
                <div class="space-y-2 quiz-options"></div>
            </div>
            <div class="quiz-feedback mt-4 p-4 bg-gray-50 rounded border border-gray-200">
                <div class="font-bold mb-1 feedback-title"></div>
                <p class="text-sm text-gray-700 feedback-text"></p>
            </div>
        </div>
    </template>

    <script>
        const checklistItems = ["BMI 25以上：肥満", "食塩摂取目標：1日7g", "受療率：入院1位＝精神", "通院者率：1位＝高血圧", "死因：1.悪性新生物 2.心疾患", "トリアージ：赤＝最優先", "カルテ保存：5年"];

        const quizzes = [
            // Social
            { id: "s1", container: "quiz-container-social", question: "生活保護法に基づく扶助のうち、現物給付で行われるのはどれか。", options: ["生活扶助", "住宅扶助", "医療扶助", "教育扶助"], correct: 2, explanation: "医療扶助と介護扶助は現物給付（サービス提供）です。" },
            { id: "s2", container: "quiz-container-social", question: "生活保護の原理として正しいのはどれか。", options: ["申請保護", "必要即応", "国家責任", "世帯単位"], correct: 2, explanation: "国家責任は原理。他は原則。" },
            { id: "s3", container: "quiz-container-social", question: "国民年金の第3号被保険者は。", options: ["自営業", "学生", "会社員", "会社員の配偶者"], correct: 3, explanation: "扶養されている配偶者が第3号。" },
            { id: "s4", container: "quiz-container-social", question: "児童手当の支給対象児童の年齢は。", options: ["小学校就学前", "中学校修了まで", "18歳年度末", "20歳未満"], correct: 2, explanation: "現在は高校生年代（18歳到達後の最初の3月31日）まで延長される傾向にあります。" },
            { id: "s5", container: "quiz-container-social", question: "介護2号の年齢区分は。", options: ["20-40", "40-65", "65-75", "75以上"], correct: 1, explanation: "40歳以上65歳未満。" },
            
            // Insurance
            { id: "i1", container: "quiz-container-insurance", question: "介護老人保健施設の主な目的は。", options: ["終身利用", "在宅復帰", "高度医療", "認知症治療"], correct: 1, explanation: "老健は在宅復帰を目指す中間施設です。" },
            { id: "i2", container: "quiz-container-insurance", question: "介護保険で「購入」対象となる福祉用具は。", options: ["車椅子", "ベッド", "腰掛便座", "歩行器"], correct: 2, explanation: "腰掛便座（ポータブルトイレ）や入浴用品は購入対象です。" },
            { id: "i3", container: "quiz-container-insurance", question: "国保の保険者は。", options: ["国", "都道府県と市町村", "健保組合", "協会けんぽ"], correct: 1, explanation: "市町村と都道府県が共同で保険者となります。" },
            { id: "i4", container: "quiz-container-insurance", question: "後期高齢者医療制度の対象年齢は。", options: ["65歳以上", "70歳以上", "75歳以上", "80歳以上"], correct: 2, explanation: "原則75歳以上です。" },

            // Record
            { id: "r1", container: "quiz-container-record", question: "診療録（カルテ）の保存期間は。", options: ["2年", "3年", "5年", "10年"], correct: 2, explanation: "医師法により5年間です。" },
            { id: "r2", container: "quiz-container-record", question: "助産録の保存期間は。", options: ["2年", "3年", "5年", "10年"], correct: 2, explanation: "保助看法により5年間です。" },
            { id: "r3", container: "quiz-container-record", question: "看護記録の保存期間は。", options: ["2年", "3年", "5年", "10年"], correct: 0, explanation: "医療法により2年間です。" },

            // Law
            { id: "l1", container: "quiz-container-law", question: "保助看法で規定されているのは。", options: ["応招義務", "守秘義務", "処方箋交付", "死亡診断書交付"], correct: 1, explanation: "守秘義務は保助看法。他は医師法です。" },
            { id: "l2", container: "quiz-container-law", question: "人材確保法に規定されているのは。", options: ["業務従事者届", "ナースセンター", "特定行為研修", "免許の交付"], correct: 1, explanation: "ナースセンターの設置は人確法です。" },
            { id: "l3", container: "quiz-container-law", question: "医療計画策定者は。", options: ["市町村", "都道府県", "厚労省", "保健所"], correct: 1, explanation: "都道府県が策定します。" },
            { id: "l4", container: "quiz-container-law", question: "特定機能病院の病床要件は。", options: ["100床以上", "200床以上", "400床以上", "500床以上"], correct: 2, explanation: "400床以上です。" },

            // Stats
            { id: "stat1", container: "quiz-container-stats", question: "死因順位第1位は。", options: ["心疾患", "老衰", "悪性新生物", "脳血管疾患"], correct: 2, explanation: "1位悪性新生物。" },
            { id: "stat2", container: "quiz-container-stats", question: "合計特殊出生率とは。", options: ["人口千人対の出生", "一生に産む子供の数", "有配偶出生率", "自然増加数"], correct: 1, explanation: "1人の女性が一生に産む子供の数。" },

            // Maternal & Psych
            { id: "mat1", container: "quiz-container-maternal", question: "母体保護法で規定されているのは。", options: ["妊産婦健診", "人工妊娠中絶", "産前産後休業", "出産一時金"], correct: 1, explanation: "中絶と不妊手術。" },
            { id: "mat2", container: "quiz-container-maternal", question: "自傷他害のおそれがある入院は。", options: ["任意", "医療保護", "措置", "応急"], correct: 2, explanation: "措置入院（知事決定）。" },
            { id: "mat3", container: "quiz-container-maternal", question: "児童相談所の業務でないのは。", options: ["一時保護", "里親認定", "障害相談", "虐待対応"], correct: 1, explanation: "里親認定は知事。" },
            { id: "mat4", container: "quiz-container-maternal", question: "ネーゲレ概算法で月に足す数。", options: ["+3", "+7", "+9", "+10"], correct: 2, explanation: "月+9、日+7。" },

            // Public
            { id: "pub1", container: "quiz-container-public", question: "2類感染症は。", options: ["コレラ", "結核", "エボラ", "インフル"], correct: 1, explanation: "結核は2類。" },
            { id: "pub2", container: "quiz-container-public", question: "産業医選任の労働者数は。", options: ["10人", "30人", "50人", "100人"], correct: 2, explanation: "常時50人以上。" },
            { id: "pub3", container: "quiz-container-public", question: "学校出席停止の命令者は。", options: ["学校医", "学校長", "教育委員会", "保健所長"], correct: 1, explanation: "学校長。" },

            // Calc
            { id: "c1", container: "quiz-container-calc-drip", question: "成人用ルートの滴下係数は。", options: ["10", "15", "20", "60"], correct: 2, explanation: "20滴/mL。" },
            { id: "c2", container: "quiz-container-calc-oxy", question: "ボンベ残量計算で圧力は何倍？", options: ["1倍", "10倍", "100倍", "しない"], correct: 1, explanation: "MPaを10倍してLに換算。" },
            { id: "c3", container: "quiz-container-calc-nut", question: "標準体重のBMIは。", options: ["18.5", "22", "25", "30"], correct: 1, explanation: "BMI22が標準。" },

            // Theory
            { id: "t1", container: "quiz-container-theory", question: "『看護覚え書』の著者は。", options: ["ヘンダーソン", "オレム", "ナイチンゲール", "ロイ"], correct: 2, explanation: "ナイチンゲール。" },
            { id: "t2", container: "quiz-container-theory", question: "14の基本的ニードは。", options: ["ヘンダーソン", "ペプロウ", "トラベルビー", "ロジャーズ"], correct: 0, explanation: "ヘンダーソン。" },
            { id: "t3", container: "quiz-container-theory", question: "セルフケア不足理論は。", options: ["ロイ", "オレム", "キング", "ニューマン"], correct: 1, explanation: "オレム。" },

            // Health
            { id: "hlth1", container: "quiz-container-health", question: "三次予防は。", options: ["ワクチン", "がん検診", "リハビリ", "減塩"], correct: 2, explanation: "リハビリは三次予防。" },

            // Drugs
            { id: "drug1", container: "quiz-container-drugs", question: "麻薬の保管は。", options: ["鍵と堅固な設備", "冷暗所", "劇薬と一緒", "救急カート"], correct: 0, explanation: "鍵＋堅固な設備。" }
        ];

        function initCharts() {
            new Chart(document.getElementById('deathCausesChart').getContext('2d'), { type: 'bar', data: { labels: ['悪性新生物', '心疾患', '老衰', '脳血管', '肺炎'], datasets: [{ label: '割合(%)', data: [24.6, 14.8, 11.4, 6.8, 4.7], backgroundColor: '#3B82F6' }] }, options: { responsive: true, maintainAspectRatio: false } });
            new Chart(document.getElementById('outpatientChart').getContext('2d'), { type: 'bar', data: { labels: ['高血圧', '腰痛', '眼', '脂質異常', '歯'], datasets: [{ label: '男性', data: [125, 90, 45, 50, 75], backgroundColor: '#3B82F6' }, { label: '女性', data: [130, 110, 80, 70, 60], backgroundColor: '#EF4444' }] }, options: { responsive: true, maintainAspectRatio: false } });
            new Chart(document.getElementById('householdChart').getContext('2d'), { type: 'doughnut', data: { labels: ['単独', '夫婦と子', '夫婦のみ', '親と子', 'その他'], datasets: [{ data: [32.9, 25.8, 24.5, 6.8, 10.0], backgroundColor: ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#9CA3AF'] }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right' } } } });
            new Chart(document.getElementById('birthRateChart').getContext('2d'), { type: 'line', data: { labels: ['2019', '2020', '2021', '2022', '2023'], datasets: [{ label: '合計特殊出生率', data: [1.36, 1.33, 1.30, 1.26, 1.20], borderColor: '#EF4444', tension: 0.1 }] }, options: { responsive: true, maintainAspectRatio: false } });
            new Chart(document.getElementById('deathRateChart').getContext('2d'), { type: 'line', data: { labels: ['H25', 'H28', 'R1', 'R4'], datasets: [{ label: '老衰', data: [60, 80, 100, 120], borderColor: '#10B981' }, { label: '脳血管', data: [90, 85, 80, 75], borderColor: '#F59E0B' }] }, options: { responsive: true, maintainAspectRatio: false } });
            new Chart(document.getElementById('symptomChart').getContext('2d'), { type: 'bar', data: { labels: ['腰痛', '肩こり', '手足の痛み', '鼻水', 'せき'], datasets: [{ label: '男性(有訴者)', data: [80, 50, 20, 30, 10], backgroundColor: '#3B82F6' }, { label: '女性(有訴者)', data: [90, 100, 40, 20, 10], backgroundColor: '#EC4899' }] }, options: { responsive: true, maintainAspectRatio: false } });
        }

        function showSection(sectionId, btn) {
            document.querySelectorAll('.content-section').forEach(el => el.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');
            document.getElementById('main-content').scrollTop = 0;
            if(btn) { document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active')); btn.classList.add('active'); }
            if (sectionId === 'stats') setTimeout(() => window.dispatchEvent(new Event('resize')), 100);
        }

        function toggleMobileMenu() { document.getElementById('mobile-menu').classList.toggle('hidden'); }
        
        function renderChecklist() {
            const container = document.getElementById('checklist-container');
            checklistItems.forEach(item => {
                const div = document.createElement('div');
                div.className = "flex items-center p-2 hover:bg-red-50 rounded cursor-pointer";
                div.onclick = function() { const cb = this.querySelector('input'); cb.checked = !cb.checked; };
                div.innerHTML = `<input type="checkbox" class="mr-3 h-5 w-5 text-red-600 rounded"><span class="text-sm font-bold text-gray-700">${item}</span>`;
                container.appendChild(div);
            });
        }

        function renderQuizzes() {
            const template = document.getElementById('quiz-template');
            quizzes.forEach(quiz => {
                const container = document.getElementById(quiz.container);
                if (!container) return;
                const clone = template.content.cloneNode(true);
                clone.querySelector('.quiz-question').textContent = quiz.question;
                const optionsContainer = clone.querySelector('.quiz-options');
                const feedbackDiv = clone.querySelector('.quiz-feedback');
                
                quiz.options.forEach((opt, idx) => {
                    const btn = document.createElement('button');
                    btn.className = "w-full text-left p-3 rounded border border-gray-300 hover:bg-gray-50 text-sm mb-2 transition";
                    btn.textContent = `${idx + 1}. ${opt}`;
                    btn.onclick = function() {
                        optionsContainer.querySelectorAll('button').forEach(b => b.disabled = true);
                        feedbackDiv.style.display = 'block';
                        const title = feedbackDiv.querySelector('.feedback-title');
                        if (idx === quiz.correct) {
                            btn.classList.add('bg-green-100', 'border-green-500', 'text-green-800');
                            title.textContent = "正解！"; title.className = "font-bold mb-1 text-green-600";
                        } else {
                            btn.classList.add('bg-red-100', 'border-red-500', 'text-red-800');
                            title.textContent = "不正解..."; title.className = "font-bold mb-1 text-red-600";
                        }
                        feedbackDiv.querySelector('.feedback-text').textContent = quiz.explanation;
                    };
                    optionsContainer.appendChild(btn);
                });
                container.appendChild(clone);
            });
        }

        function switchTab(btn, contentId) {
            const container = btn.closest('.bg-white');
            container.querySelectorAll('button').forEach(t => t.classList.remove('active-tab'));
            container.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            btn.classList.add('active-tab');
            container.querySelector(`#${contentId}`).classList.add('active');
        }

        function toggleKeyword(el) {
            if (el.classList.contains('keyword-hidden')) {
                el.classList.remove('keyword-hidden'); el.classList.add('keyword-revealed');
            } else {
                el.classList.add('keyword-hidden'); el.classList.remove('keyword-revealed');
            }
        }
        
        function toggleAccordion(id) {
            const el = document.getElementById(id);
            if (el.style.maxHeight) { el.style.maxHeight = null; } 
            else { el.style.maxHeight = el.scrollHeight + "px"; }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderChecklist();
            renderQuizzes();
            initCharts();
            document.getElementById('mobile-menu-btn').addEventListener('click', toggleMobileMenu);
            document.getElementById('close-menu-btn').addEventListener('click', toggleMobileMenu);
        });
    </script>
</body>
</html>
